.\" Automatically generated by Pod::Man v1.37, Pod::Parser v1.13
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  | will give a
.\" real vertical bar.  \*(C+ will give a nicer C++.  Capital omega is used to
.\" do unbreakable dashes and therefore won't be available.  \*(C` and \*(C'
.\" expand to `' in nroff, nothing in troff, for use with C<>.
.tr \(*W-|\(bv\*(Tr
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.if \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.\"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.hy 0
.if n .na
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "EDG-MKGRIDMAP 8"
.TH EDG-MKGRIDMAP 8 "2011-04-03" " " " "
.SH "NAME"
edg\-mkgridmap \- a tool to build the grid\-mapfile
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
\&\fBedg-mkgridmap\fR [\fB\-\-help\fR] [\fB\-\-version\fR]
              [\fB\-\-conf\fR=\fIconfig_file\fR]
              [\fB\-\-output\fR[=\fIoutput_file\fR]]
              [\fB\-\-quiet\fR] [\fB\-\-verbose\fR]
              [\fB\-\-safe\fR] [\fB\-\-nosafe\fR]
              [\fB\-\-cache\fR] [\fB\-\-nocache\fR]
              [\fB\-\-proxy\fR] [\fB\-\-noproxy\fR]
              [\fB\-\-usermode\fR]
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
\&\fBedg-mkgridmap\fR is a tool to build the grid-mapfile from \s-1VO\s0 servers,
taking into account both \s-1VO\s0 and local policies.
.SH "CONFIGURATION"
.IX Header "CONFIGURATION"
\&\fIedg\-mkgridmap.conf\fR file contains configuration information for
\&\fBedg-mkgridmap\fR.
.PP
The syntax of the \fIedg\-mkgridmap.conf\fR file is discussed seperately. The
\&\fIedg\-mkgridmap.conf\fR\|(5) documentation should be consulted for detailed
reference information.
.PP
The default location is \fI/etc/edg\-mkgridmap.conf\fR.
.PP
The file essentially consists of a list of directives composed by a
keyword and one or more arguments. Optional arguments are put in square
brackets.
.IP "* \fBgroup\fR \fI\s-1URI\s0\fR \fI[lcluser]\fR" 4
.IX Item "group URI [lcluser]"
.PD 0
.IP "* \fBdefault_lcluser\fR \fIdefault_lcluser\fR" 4
.IX Item "default_lcluser default_lcluser"
.IP "* \fBauth\fR \fI\s-1URI\s0\fR" 4
.IX Item "auth URI"
.IP "* \fBallow\fR|\fBdeny\fR \fIpattern_to_match\fR" 4
.IX Item "allow|deny pattern_to_match"
.IP "* \fBgmf_local\fR \fIgrid-mapfile-local\fR" 4
.IX Item "gmf_local grid-mapfile-local"
.PD
.SH "OPTIONS"
.IX Header "OPTIONS"
.IP "\fB\-\-help\fR" 4
.IX Item "--help"
Print a summary of the command line options end exit.
.IP "\fB\-\-version\fR" 4
.IX Item "--version"
Print the version of \fBedg-mkgridmap\fR end exit.
.IP "\fB\-\-conf\fR=\fIconfig_file\fR" 4
.IX Item "--conf=config_file"
Specifies the configuration file that is used by \fBedg-mkgridmap\fR. If
omitted, \fBedg-mkgridmap\fR checks \fI/var/lib/edg\-mkgridmap/etc/edg\-mkgridmap.conf\fR to
see if a machine-specific configuration has been setup. If
such a file is not present, \fBedg-mkgridmap\fR
uses the default configuration file \fI/etc/edg\-mkgridmap.conf\fR.
.IP "\fB\-\-output\fR[=\fIoutput_file\fR]" 4
.IX Item "--output[=output_file]"
Specifies the output file. If omitted, \fIstdout\fR is used. If the optional
argument \fIoutput_file\fR is omitted, the value of the environment variable
\&\fB\s-1GRIDMAP\s0\fR is used. If \fB\s-1GRIDMAP\s0\fR is not set, then the default value
\&\fI/etc/grid\-security/grid\-mapfile\fR is used.
.IP "\fB\-\-quiet\fR" 4
.IX Item "--quiet"
Turn off error messages.
.IP "\fB\-\-verbose\fR" 4
.IX Item "--verbose"
Print lots of useful informations. Ignored if \fB\-\-quiet\fR is specified.
.IP "\fB\-\-safe\fR, \fB\-\-nosafe\fR" 4
.IX Item "--safe, --nosafe"
Per \fBgroup\fR keep (\fB\-\-safe\fR) or remove (\fB\-\-nosafe\fR) the old grid-mapfile
entries that are not found back, when at least one of the sources for that
\&\fBgroup\fR directive had a problem. Default is remove (\fB\-\-nosafe\fR).
.IP "\fB\-\-cache\fR, \fB\-\-nocache\fR" 4
.IX Item "--cache, --nocache"
Disable (\fB\-\-cache\fR) or enable (\fB\-\-nocache\fR) the grid-mapfile update when
its contents remain unchanged. Default is enable (\fB\-\-nocache\fR).
.IP "\fB\-\-proxy\fR, \fB\-\-noproxy\fR" 4
.IX Item "--proxy, --noproxy"
Enable (\fB\-\-proxy\fR) or disable (\fB\-\-noproxy\fR) proxy support for \s-1HTTP/HTTPS\s0
and \s-1VOMS/VOMSS\s0 connections. Default is disable (\fB\-\-noproxy\fR).
.Sp
The proxy support must be configured through appropriate environmental
variables.
.IP "\fB\-\-usermode\fR" 4
.IX Item "--usermode"
Facilitate running the script as an ordinary user by having the relevant
environment variables point to the user's X509 proxy instead of using the
personal certificate and key.  The user's proxy is taken from the
\&\fBX509_USER_PROXY\fR environment variable, if defined, else from the
default location \fI/tmp/x509up_u$UID\fR.
.SH "ERRORS"
.IX Header "ERRORS"
In case of one or more errors, \fBedg-mkgridmap\fR returns an exit code which
is computed adding these possible values:
.IP "* \fB1\fR" 4
.IX Item "1"
per \fBgroup\fR directive for which a server could not be contacted.
.IP "* \fB16\fR" 4
.IX Item "16"
error reading the configuration file.
.IP "* \fB32\fR" 4
.IX Item "32"
error writing the grid\-mapfile.
.IP "* \fB64\fR" 4
.IX Item "64"
error with a \fBgroup\fR directive.
.IP "* \fB128\fR" 4
.IX Item "128"
error with an \fBauth\fR directive.
.SH "DIAGNOSTICS"
.IX Header "DIAGNOSTICS"
The \fB\-\-verbose\fR option produces some useful diagnostics.
.PP
Any error message generated by \fBedg-mkgridmap\fR is logged to the
\&\fBsyslogd\fR.
.SH "ENVIRONMENT"
.IX Header "ENVIRONMENT"
.IP "\fB\s-1EDG_MKGRIDMAP_OPTIONS\s0\fR" 4
.IX Item "EDG_MKGRIDMAP_OPTIONS"
Used to specify command line options.
.IP "\fB\s-1GRIDMAP\s0\fR" 4
.IX Item "GRIDMAP"
Used to determine the location of the grid\-mapfile. If not set, then the
default value \fI/etc/grid\-security/grid\-mapfile\fR is used.
.IP "\fB\s-1CERTDIR\s0\fR" 4
.IX Item "CERTDIR"
Used to determine the directory containing \s-1CA\s0 certificates. If not set,
then the default value \fI/etc/grid\-security/certificates\fR is used.
.IP "\fBX509_USER_CERT\fR" 4
.IX Item "X509_USER_CERT"
Used to determine the location of the host certificate. If not set, then
the default value \fI/etc/grid\-security/hostcert.pem\fR is used.
.IP "\fBX509_USER_KEY\fR" 4
.IX Item "X509_USER_KEY"
Used to determine the location of the host private key. If not set, then
the default value \fI/etc/grid\-security/hostkey.pem\fR is used.
.IP "\fBX509_USER_PROXY\fR" 4
.IX Item "X509_USER_PROXY"
Used to determine the location of the user's proxy when the \fB\-\-usermode\fR
option is given.  If not set, the default value \fI/tmp/x509up_u$UID\fR is used.
.IP "\fBhttp_proxy\fR" 4
.IX Item "http_proxy"
Used to determine the proxy for \s-1HTTP\s0 connections. The syntax is:
.Sp
.Vb 1
\&  http_proxy="[http://]<host>:<port>"
.Ve
.IP "\fBhttps_proxy\fR" 4
.IX Item "https_proxy"
Used to determine the proxy for \s-1HTTPS\s0 connections. The syntax is:
.Sp
.Vb 1
\&  https_proxy="[http://]<host>:<port>"
.Ve
.SH "EXAMPLES"
.IX Header "EXAMPLES"
.Vb 1
\&  edg-mkgridmap
.Ve
.PP
Writes the grid-mapfile to the standard output.
.PP
.Vb 1
\&  edg-mkgridmap --output=-
.Ve
.PP
Writes the grid-mapfile to the standard output.
.PP
.Vb 1
\&  edg-mkgridmap --output
.Ve
.PP
Writes the grid-mapfile to the default location of the grid\-mapfile.
.PP
.Vb 1
\&  edg-mkgridmap --output=<output_file>
.Ve
.PP
Writes the grid-mapfile to <output_file>.
.SH "FILES"
.IX Header "FILES"
\&\fI/var/lib/edg\-mkgridmap/etc/edg\-mkgridmap.conf\fR
.PP
\&\fI/etc/edg\-mkgridmap.conf\fR
.PP
\&\fI/usr/libexec/edg\-mkgridmap/local\-subject2user\fR
.SH "SEE ALSO"
.IX Header "SEE ALSO"
\&\fIedg\-mkgridmap.conf\fR\|(5)
.SH "AUTHORS"
.IX Header "AUTHORS"
\&\s-1EU\s0 DataGrid Authorization Working Group,
\&\s-1EGEE\s0 Middleware Security Group, Maarten Litmaath (\s-1CERN/WLCG\s0)
